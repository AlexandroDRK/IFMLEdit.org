describe('<%= name %>', function () {
  let formState = {};
  beforeEach(() => {
    cy.visit('http://localhost:3001/');
  });

  it('Preenche o formulário e envia', function () {
    <% for (var i = 0; i < fields.length; ++i) { -%>
    cy.get('[name="<%= id %>$f$"]').eq(<%= i %>).type('Valor do campo <%= fields[i] %>');
    formState.campo<%= i %> = 'Valor do campo <%= fields[i] %>';
    <% } -%>
  });

  it('Testa se os campos estão preenchidos corretamente', function () {
    <% for (var i = 0; i < fields.length; ++i) { -%>
    let campo<%= i %> = formState.campo<%= i %>;
    cy.get('[name="<%= id %>$f$"]').eq(<%= i %>).type(campo<%= i %>);
    cy.wait(1000);
    cy.get('[name="<%= id %>$f$"]').eq(<%= i %>).should('have.value', campo<%= i %>);
    <% } -%>
  });

  it('Testa o redirecionamento do botão', function () {
    <% for (var i = 0; i < fields.length; ++i) { -%>
    let campo<%= i %> = formState.campo<%= i %>;
    cy.get('[name="<%= id %>$f$"]').eq(<%= i %>).type(campo<%= i %>);
    <% } -%>
    cy.wait(1000);
    cy.get('.btn.btn-secondary').click();
  });
});
